{% extends "_layout.twig" %}

{% if viewmode == "forum" %}
	{% set title = forum.title %}

	{% if log %}
		{% set actions = {("newthread.php?id="~id) : "New thread"} %}
	{% endif %}
{% elseif viewmode == "user" %}
	{% set title = "Threads" %}
{% elseif viewmode == "time" %}
	{% set title = "Latest posts (by thread)" %}
{% endif %}

	{% block content %}
{% if viewmode == "time" %}
	<table class="c1 autowidth">
		<tr class="h"><td>Latest posts</td></tr>
		<tr><td class="n1 center">
			By thread | <a href="thread.php?time={{ time }}">By post</a> (<a href="rss.php">RSS</a>)
			<br><br>{{ timelinks('forum', time) }}
		</td></tr>
	</table><br>
{% endif %}

<table class="c1">
	<tr class="h">
		<td colspan="2">Title</td>
		<td class="nom" style="width:150px">Author</td>
		<td class="nom" style="width:60px">Replies</td>
		<td class="nom" style="width:60px">Views</td>
		<td style="width:200px">Last post</td>
	</tr>
	{% set i = 1 %}
	{% for thread in threads %}
		{% if i % 2 %}
			{% set zebra = 1 %}
		{% else %}
			{% set zebra = 2 %}
		{% endif %}

		<tr class="center n{{ zebra }}">
			<td style="width:30px">
				{% if thread.closed %}
					{{ thread_status("o") }}
				{% endif %}
			</td>
			<td class="left">
				<a href="thread.php?id={{ thread.id }}">{{ thread.title }}</a>
			</td>
			<td class="nom">{{ userlink(thread, 'u_') }}</td>
			<td class="nom">{{ thread.posts-1 }}</td>
			<td class="nom">{{ thread.views }}</td>
			<td>
				<span>{{ thread.lastdate | date('Y-m-d H:i') }}</span><br>
				<span>by {{ userlink(thread, 'ul_' ) }}
					<a href="thread.php?pid={{ thread.lastid }}#{{ thread.lastid }}">&raquo;</a></span>
			</td>
		</tr>
		{% set i = i + 1 %}
	{% endfor %}
	{% if i == 1 %}
		<tr><td class="n1 center" colspan="6"><p>No threads found.</p></td></tr>
	{% endif %}
</table>

{{ pagelist | raw }}
	{% endblock %}
